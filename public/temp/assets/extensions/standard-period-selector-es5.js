!function(t){function e(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(2);!function(i,a){"object"===e(t)&&t.exports?t.exports=i.document?a(i):function(t){if(!t.document)throw new Error("Window with document not present");return a(t,!0)}:i.StandardPeriodSelector=a(i,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var i=t.FusionCharts;i.register("extension",["private","standard-period-selector",function(){i.registerComponent("extensions","standard-period-selector",a({FusionCharts:i}))}])})}).call(e,i(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();t.exports=function(t){var e=function(){function t(){i(this,t);var e=this;e.ratio=8,e.toolbox=FusionCharts.getComponent("api","toolbox"),e.HorizontalToolbar=e.toolbox.HorizontalToolbar,e.ComponentGroup=e.toolbox.ComponentGroup,e.SymbolStore=e.toolbox.SymbolStore,e.all=1,e.calculatedPeriods=[],e.startDataset=0,e.startActiveWindow=0,e.endActiveWindow=1,e.standardCalculatedPeriods=[],e.standardContexualPeriods=[],e.startPointUnit=0,e.startPointMultiplier=0,e.noCalcButtons=0,e.minimumBucket=5184e6,e.toolbar={},e.categoryClicked,e.btns={contextualObj:{},calculatedObj:{}},e.tdButtons=[{name:"YTD",abbreviation:"YTD",parent:"year",milliseconds:31104e6,description:"Year to Date"},{name:"QTD",abbreviation:"QTD",parent:"month",multiplier:3,milliseconds:7776e6,description:"Quarter to Date"},{name:"MTD",abbreviation:"MTD",parent:"month",milliseconds:2592e6,description:"Month to Date"},{name:"WTD",abbreviation:"WTD",parent:"day",multiplier:7,milliseconds:6048e5,description:"Week to Date"},{name:"Y",abbreviation:"Y",parent:"day",milliseconds:864e5,description:"Yesterday"},{name:"T",abbreviation:"T",parent:"day",milliseconds:864e5,description:"Today"}],e.config={anchorPositions:"right",all:"1",contextual:"1",calculated:"1",tertiaryTimePeriods:{}},e._babTimer=0,e.propsChangeListener=function(t,i){e.startActiveWindow=t[1],e.endActiveWindow=i[1],e._babTimer?e.updatePending||(e.updatePending=!0,setTimeout(function(){e.updatePending=!1,e.onActiveRangeChange()},e._babTimer)):(e._babTimer=200,e.onActiveRangeChange())}}return a(t,[{key:"hideAllCalcBtns",value:function(){var t,e=this,i=e.btns.calculatedObj;for(t in i)i[t].btn.hide()}},{key:"showApplicableCalculatedButtons",value:function(){var t,e=this,i=this.endActiveWindow-this.startDataset,a=0,n=0,o=this.endActiveWindow-this.startActiveWindow,r=e.btns.calculatedObj;for(e.hideAllCalcBtns(),e.standardCalculatedPeriods=[],a=0;a<e.timePeriods.length;a++)if(i/e.timePeriods[a].interval>=1)if(this.extData["default-select"]==="1"+e.timePeriods[a].abbreviation.single&&(this.clickedIdVal=e.timePeriods[a].interval),Math.floor(o/e.timePeriods[a].interval)<1)e.standardCalculatedPeriods.push({name:e.timePeriods[a].name,abbreviation:e.timePeriods[a].abbreviation.single,multipliers:[1]});else for(e.standardCalculatedPeriods.push({name:e.timePeriods[a].name,abbreviation:e.timePeriods[a].abbreviation.single,multipliers:[]}),n=0;n<e.timePeriods[a].multipliers.length;n++)o/e.ratio<e.timePeriods[a].multipliers[n]*e.timePeriods[a].interval&&e.timePeriods[a].multipliers[n]*e.timePeriods[a].interval>e.minimumBucket&&e.timePeriods[a].multipliers[n]*e.timePeriods[a].interval<=i&&e.standardCalculatedPeriods[e.standardCalculatedPeriods.length-1].multipliers.push(e.timePeriods[a].multipliers[n]);for(a=0;a<e.standardCalculatedPeriods.length;a++)for(n=0;n<e.standardCalculatedPeriods[a].multipliers.length;n++)t=e.standardCalculatedPeriods[a].multipliers[n]+e.standardCalculatedPeriods[a].name,r[t].btn&&r[t].btn.show();e.toolbar&&e.toolbar.redraw()}},{key:"heighlightActiveRange",value:function(){var t,e,i,a,n,o,r=this,s=r.saveSelectLine,l=r.clickedId,d=r.btns.contextualObj,c=r.btns.calculatedObj;s||(s=r.saveSelectLine||(r.saveSelectLine=r.graphics.paper.path({stroke:"#c95a5a","stroke-width":"2px"}).toFront())),o=d[l]||c[l]||r.btns[l],o?(t=o.btn.svgElems.node,e=t.getBBox(),i=e.x,a=i+e.width,n=e.y+e.height,s.show().attr({path:["M",i-.5,n-.5,"L",a+.5,n-.5]})):s.hide()}},{key:"onActiveRangeChange",value:function(){var t,e,i,a=this,n=a.categoryClicked,o=a.clickedId,r=a.startDataset,s=a.endDataset,l=a.startActiveWindow,d=a.endActiveWindow,c=a.btns.contextualObj,u=a.btns.calculatedObj;if("ALL"===n)r===l&&s===d||(delete a.clickedId,delete a.categoryClicked);else if("contextual"===n)i=c[o],!i||l===i.contextStart&&d===i.contextEnd||(delete a.clickedId,delete a.categoryClicked);else if("calculated"===n)i=u[o],i&&d-l!==i.interval&&(delete a.clickedId,delete a.categoryClicked);else if(r===l&&s===d)a.clickedId="ALL",a.categoryClicked="ALL";else{for(t in c)i=c[t],l===i.contextStart&&d===i.contextEnd&&(a.clickedId=t,a.categoryClicked="contextual",e=!0);if(!e)for(t in u)i=u[t],d-l===i.interval&&(a.clickedId=t,a.categoryClicked="calculated")}a.showApplicableCalculatedButtons(),a.heighlightActiveRange()}},{key:"processMultipliers",value:function(t){for(var e=this,i=0;i<t.length;i++){var a=t[i].possibleFactors.length,n=t[i]&&t[i].name,o=t&&t[i],r=e&&e.customMultipliers||{};o.multipliers=[],r[n]?o.multipliers=r[n]:1===a?o.multipliers.push(o.possibleFactors[0]):2===a?(o.multipliers.push(o.possibleFactors[0]),o.multipliers.push(o.possibleFactors[a-1])):(o.multipliers.push(o.possibleFactors[0]),o.multipliers.push(Math.floor(o.possibleFactors[a-1]/2)),o.multipliers.push(o.possibleFactors[a-1]))}return t}},{key:"createCalculatedButtons",value:function(t){for(var e,i,a=this,n=this,o=n.btns.calculatedObj,r=n.timePeriods.length-1;r>=0;r--)for(var s=function(s){var l=n.timePeriods[r].multipliers[s]+n.timePeriods[r].abbreviation.single,d=n.timePeriods[r].multipliers[s]+n.timePeriods[r].name,c=n.timePeriods[r].multipliers[s]*n.timePeriods[r].interval;i=o[d]={interval:c,fn:function(){n.clickedId=d,n.categoryClicked="calculated",n.heighlightActiveRange(),n.globalReactiveModel.model["x-axis-visible-range-start"]=n.endActiveWindow-c},shortKey:l},e=new a.toolbox.Symbol(l,!0,{paper:a.graphics.paper,chart:a.chart,smartLabel:a.smartLabel,chartContainer:a.graphics.container},n.extData.style["calculated-config"]).attachEventHandlers({click:i.fn,tooltext:n.timePeriods[r].multipliers[s]+" "+n.timePeriods[r].description}),i.btn=e,t.addSymbol(e)},l=n.timePeriods[r].multipliers.length-1;l>=0;l--)s(l)}},{key:"generateCtxBtnList",value:function(){for(var t=[],e=0,i=this.globalReactiveModel.model["x-axis-absolute-range-end"],a=i-2,n=i,o={};e<this.tdButtons.length;e++)a=new Date(i),"YTD"===this.tdButtons[e].name?(a.setMonth(0),a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"MTD"===this.tdButtons[e].name?(a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"QTD"===this.tdButtons[e].name?(a.setMonth(11-a.getMonth()%4),a.setDate(0),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"WTD"===this.tdButtons[e].name?(a.setDate(a.getDate()-a.getDay()),a.setHours(0),a.setMinutes(0),a.setSeconds(0)):"Y"===this.tdButtons[e].name?(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a-=864e5):"T"===this.tdButtons[e].name&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),+this.endDataset===+a&&(a=+a-864e5)),n<a&&n-a<this.minimumBucket||(this.tdButtons[e].dateStart=a.valueOf(),this.tdButtons[e].dateEnd=n.valueOf(),t.push(this.tdButtons[e]));for(o.milliseconds=1/0,e=0;e<this.tdButtons.length;e++)Math.abs(this.tdButtons[e].milliseconds-(this.endActiveWindow-this.startActiveWindow))<o.milliseconds&&(o.milliseconds=this.tdButtons[e].milliseconds,o.name=this.tdButtons[e].abbreviation);this.standardContexualPeriods=t}},{key:"createContextualButtons",value:function(t){var e,i,a,n=this,o=this,r=o.btns.contextualObj;o.generateCtxBtnList();for(var s=function(s){e=0===s?o.extData.style["contextual-config-first"]||{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#ced5d4",radius:1,margin:{right:0,left:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}}:o.extData.style["contextual-config"]||{fill:"#ffffff",labelFill:"#696969",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#ced5d4",radius:1,margin:{right:0,left:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}},a=n.standardContexualPeriods[s].abbreviation,i=r[a]={contextStart:o.standardContexualPeriods[s].dateStart,contextEnd:o.standardContexualPeriods[s].dateEnd,fn:function(){o.categoryClicked="contextual",o.clickedId=o.standardContexualPeriods[s].abbreviation,o.heighlightActiveRange(),o.globalReactiveModel.lock().prop("x-axis-visible-range-start",o.standardContexualPeriods[s].dateStart).prop("x-axis-visible-range-end",o.standardContexualPeriods[s].dateEnd).unlock()}},i.btn=new n.toolbox.Symbol(n.standardContexualPeriods[s].abbreviation,!0,{paper:n.graphics.paper,chart:n.chart,smartLabel:n.smartLabel,chartContainer:n.graphics.container},e).attachEventHandlers({click:i.fn,tooltext:n.standardContexualPeriods[s].description}),o.standardContexualPeriods[s].dateEnd-o.standardContexualPeriods[s].dateStart>=o.minimumBucket&&t.addSymbol(i.btn)},l=0;l<this.standardContexualPeriods.length;l++)s(l)}},{key:"createToolbar",value:function(){var t,e,i,a,n=this.toolbar,o=this;return n=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),n.setConfig({fill:"#fff",borderThickness:0}),a=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),a.setConfig({fill:"#fff",borderThickness:0}),i=new this.toolbox.Label("Zoom:",{smartLabel:this.smartLabel,paper:this.graphics.paper},o.extData.style["label-config"]),a.addSymbol(i),e={fn:function(){o.clickedId="ALL",o.categoryClicked="ALL",o.heighlightActiveRange(),o.globalReactiveModel.lock().prop("x-axis-visible-range-start",o.startDataset).prop("x-axis-visible-range-end",o.endDataset).unlock()}},e.btn=new this.toolbox.Symbol("ALL",!0,{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},o.extData.style["all-config"]).attachEventHandlers({click:e.fn,tooltext:"ALL"}),o.btns.ALL=e,t.addSymbol(e.btn),o.createCalculatedButtons(t),o.createContextualButtons(t),n.addComponent(a),n.addComponent(t),this.toolbar=n,n}},{key:"init",value:function(t){var e,i,a,n=this,o=n.btns.calculatedObj,r=n.btns.contextualObj;if(t(["graphics","chart","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","extData","chartInstance",function(t,e,i,a,o,r,s,l,d,c){n.graphics=t,n.chart=e,n.markerManager=a,n.canvasConfig=i,n.reactiveModel=o,n.globalReactiveModel=r,n.spaceManagerInstance=s,n.smartLabel=l,n.extDataUser=d,n.chartInstance=c}]),n.endActiveWindow=n.globalReactiveModel.model["x-axis-visible-range-end"],n.startActiveWindow=n.globalReactiveModel.model["x-axis-visible-range-start"],n.startDataset=n.globalReactiveModel.model["x-axis-absolute-range-start"],n.endDataset=n.globalReactiveModel.model["x-axis-absolute-range-end"],n.timeRules=n.chartInstance.apiInstance.getComponentStore(),n.timeRules=n.timeRules.getCanvasByIndex(0).composition.impl,n.timeRules=n.timeRules.getDataAggregator(),n.timeRules=n.timeRules.getAggregationTimeRules(),n.timePeriods=n.processMultipliers(n.timeRules),n.extData={disabled:"false",posWrtCanvas:"top",layout:"inline",alignment:"left",orientation:"horizontal",customMultipliers:{millisecond:[1,500],second:[1,5,15,30],minute:[1,5,15,30],hour:[1,3,6,12],day:[1,7,15],month:[1,3,6],year:[1,3,5]},style:{"label-config":{text:{style:{"font-family":'"Lucida Grande", sans-serif',"font-size":"13",fill:"#4b4b4b"}},container:{height:22}},"all-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#f7f7f7",height:22,radius:1,margin:{right:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"}},"calculated-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",hoverFill:"#f7f7f7",height:22,radius:1,margin:{right:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"}},"contextual-config-first":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#f7f7f7",radius:1,margin:{right:0,left:5},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#696969","line-height":"1","letter-spacing":"-0.04em"}},"contextual-config":{fill:"#ffffff",labelFill:"#4b4b4b",symbolStrokeWidth:"2",stroke:"#ced5d4",strokeWidth:"1",height:22,hoverFill:"#f7f7f7",radius:1,margin:{right:0,left:0},btnTextStyle:{fontFamily:'"Lucida Grande", sans-serif',fontSize:"13",fill:"#4b4b4b","line-height":"1","letter-spacing":"-0.04em"}}}},Object.assign(n.extData,n.extDataUser),n.customMultipliers=n.extData.customMultipliers||{millisecond:[1,500],second:[1,5,15,30],minute:[1,5,15,30],hour:[1,3,6,12],day:[1,7,15],month:[1,3,6],year:[1,3]},e=n.extData["default-select"])if("ALL"===e)n.clickedId="ALL";else if(r[e])n.clickedId=e;else{a=!0;for(i in o)a&&o[i].shortKey===e&&(n.clickedId=o[i].shortKey,a=!1)}return n.toolbars=[],n.measurement={},n.flag=!0,n.toolbars.push(n.createToolbar()),n.globalReactiveModel.onPropsChange(["x-axis-visible-range-start","x-axis-visible-range-end"],n.propsChangeListener),n}},{key:"getLogicalSpace",value:function(){var t,e,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._pWidth,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._pHeight,o=420,r=0;for(e=0,i=this.toolbars.length;e<i;e++)t=this.toolbars[e].getLogicalSpace(a,n),r+=t.height,this.toolbars[e].width=t.width,this.toolbars[e].height=t.height;return r+=this.padding,{width:o,height:r}}},{key:"getDefaultGroup",value:function(){return this.parentGroup}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"standard-period-selector-ext"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(e){return e[t.extData.layout]||"inline"},orientation:[{type:function(e){return e[t.extData.orientation]||"horizontal"},position:[{type:function(e){return e[t.extData.posWrtCanvas]||"top"},alignment:[{type:function(e){return e[t.extData.alignment]||"left"},dimensions:[function(){var e=this.getParentComponentGroup();return t._ref=this,t.getLogicalSpace(t._pWidth=e.getWidth(),t._pHeight=e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,i,a,n){var o=this.measurement;return o.x=t,o.y=e,o.width=i,o.height=a,this.parentGroup=n,this}},{key:"draw",value:function(t,e,i,a,n){var o,r,s,l,d=this,c=d.measurement,u=d.toolbars,h=d.btns.contextualObj,f=d.btns.calculatedObj,b=d.clickedId;if(t=void 0===t?c.x:t,e=void 0===e?c.y:e,i=void 0===i?c.width:i,a=void 0===a?c.height:a,n=void 0===n?this.parentGroup:n,i&&a)for(r=0,o=u.length;r<o;r++)s=u[r],s.draw(t,e,n);b?(l=f[b]||h[b]||d.btns[b],l?l.fn&&l.fn():d.onActiveRangeChange()):d.onActiveRangeChange(),this.minimumBucket=this.globalReactiveModel.model["minimum-consecutive-datestamp-diff"]*this.globalReactiveModel.model["x-axis-maximum-allowed-ticks"]}}]),t}();return e}}]);
//# sourceMappingURL=standard-period-selector-es5.min.js.map